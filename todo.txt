game does not open in editor

*automatic upgrade
*editor crashes shortly after launching; purged project/.godot folder

game does not run

*update plugins (gut)
*test-utils runs
*all tests pass
*ReleaseToolkit runs
 *scrutinize localizables
 *shouldn't scrape joystick stuff anymore
*code compilation errors
 *replace boolean evaluations like 'if pos_arr' with 'if not pos_arr.is_empty()'
 *replace 'Array.remove()' with 'Array.remove_at()'
 *remove export variable type hints
 *fix enums typed as 'ints'
 *change 'pressed' to 'button_pressed'
 *'Invalid operands', 'Invalid operand' errors
 *File.new
 *DirAccess.new
 *JSON.new
 *review all connect calls
 *review all disconnect calls
 *review all is_connected calls

*replace tweens
 *'_tween =' references

game starts up, but has bugs

-code tweaks and runtime errors
 *replace 'await get_tree().idle_frame' with 'await get_tree().process_frame'
 *update all 'Array.slice()' calls: slice is now exclusive, not inclusive
 *update all font scene references to include size
 *fix fonts
 *game crashes when loading PuzzleTileMap.tscn
 -add '...as Array[int]', '...as Array[float]' suffix when assigning to typed arrays; Godot #58285
 -avoid assigning constants to fields; they can't be mutated anymore
 -assigning your own fields now calls setters
 -fix 'flipx, flipy, transpose' code in tilers
 -update save files
  -update save files to use RGBA instead of ARGB
  -update save files to use new scancodes
 -remove/cleanup h1-font-new.tres
-tilemap updates
 *fix 'Cannot create tile. The tile is outside the texture...' errors
  *PuzzleTileMap.tscn
  *NightPlayfield.tscn
   *expand blocks-veggie-cubes-onion to be wider
  *EmptyEnvironment.tscn
  *Puzzle.tscn
 *rewrite tilemaps from scratch
 *fix out-of-bounds atlas cell definitions; these will cause crashes in Godot 4.x
 -replace 'autotilers' with 'terrain... things'
 -replace 'get_cellv' with get_cell_source_id
 -replace 'get_cell' with 'get_cell_source_id
-particle updates
 -randomization
-scene tweaks
 *animation looping; replace 'loop = true' in .tscn files with 'loop_mode=1'
 *label alignment; replace 'align = 2' in .tscn files with 'horizontal_alignment = 2'
 -restore 'y_sort_enabled' property for ysort nodes
 -set project's stretch mode; Godot #3939
-code warnings
 *replace '# warning-ignore' comments with '@warning_ignore' annotations
 -add '@warning_ignore' annotations for self static method calls; Godot #69282
-investigate 'ChatChoiceButton' get_class workaround; is_class is used by ChatChoices
-investigate 'Creature' get_class workaround
-restore @tool scripts
-regression test
 -#59683; polygon antialiasing is disabled; this used to be specified as a parameter to draw_colored_polygon but 'Normal maps are now specified as part of the CanvasTexture rather than specifying them on the Canvasitem itself' https://github.com/godotengine/godot/issues/59683
 -Demos
 -EmotePlayer's 'update_animation_keys' behavior
 -ChatFrameDemo's 'nametag side toggle' (L)
 -verify pause modes migrated correctly
 -font sizes, outlines
 -touchscreen buttons appear, disappear
 -region select keyboard controls: default focus, 'region_select_button_grab_focus' method
 -tilers
 -carrot cells
 -all tests pass, including the new test-keybind-manager
 -localization; settings menu, puzzles, dialog
 -monitor nodes over time; no leaks?
 -assigning an input to something weird like the '`' or '=' key shows up OK
 -settings menu in spanish; 'open user folder' button should shrink its font size
 -big font in easter egg

game runs, but can't export it

-restore export presets
 -font resources; open all '.theme' files, delete the font and reattach the font
-regression test
 -Wonky 'SettingsKeybindsControl Godot #42224 workaround', is it necessary

gold plating

-remove redundant 'enum from...' comments
-add strong typing to arrays
*replace 'randi_range' with native call
-remove 'FileUtils', replace with native calls
-free-roam-touch-buttons might have extra logic for 'menu shown' 'menu hidden' stuff

later

-refactor: money font 'outline of 3, etc' stuff used to be centralized in money-font.tres; centralized it again



Demos

*./project/src/demo/career/ui/ChalkboardMapRowDemo.tscn
 *bug: landmark lines are aliased
*./project/src/demo/ui/FontFitLabelDemo.tscn
 *bug: swapping in fonts doesn't change size
 *fix FontFitButton too
*./project/src/demo/puzzle/pan/FryingPansUiDemo.tscn
 *bug: tiles aren't visible?
 *bug: tiles are offset to the left
 *bug: ghost tiles don't fade out
 *bug: golden pans don't use golden ghost tile (material?)
 *fix 'tile ghost logic'
-./project/src/demo/puzzle/PlayfieldDemo.tscn
 *doesn't crash on startup
  *replace 'tile_set.get_tiles_ids()' calls
 -looks vaguely ok on startup
 -'QWERT'
  *PuzzleTileMap tiles appear OK
  -bug: shadows are in the wrong place
 -'ASDFG'
 -'ZXCVB'
 -'.'
-./project/src/demo/career/ui/ProgressBoardDemo.tscn
-./project/src/demo/career/ui/ProgressBoardTrailDemo.tscn
-./project/src/demo/chat/ui/ChatFrameDemo.tscn
-./project/src/demo/chat/ui/ChatscriptTableDemo.tscn
-./project/src/demo/chat/ui/ChatUiDemo.tscn
-./project/src/demo/chat/ui/MoodDemo.tscn
-./project/src/demo/music/MusicPlayerDemo.tscn
-./project/src/demo/NameGeneratorLibraryDemo.tscn
-./project/src/demo/PackedSpriteDemo.tscn
-./project/src/demo/puzzle/critter/CarrotDemo.tscn
-./project/src/demo/puzzle/critter/MoleDemo.tscn
-./project/src/demo/puzzle/critter/OnionDemo.tscn
-./project/src/demo/puzzle/critter/SharkDemo.tscn
-./project/src/demo/puzzle/level/LevelRankDemo.tscn
-./project/src/demo/puzzle/level/RankModeDemo.tscn
-./project/src/demo/puzzle/PuzzleCritterDemo.tscn
-./project/src/demo/puzzle/PuzzleDemo.tscn
-./project/src/demo/puzzle/PuzzleMessageDemo.tscn
-./project/src/demo/puzzle/ResultsHudDemo.tscn
-./project/src/demo/puzzle/ScoreDemo.tscn
-./project/src/demo/puzzle/tutorial/TutorialHudDemo.tscn
-./project/src/demo/ui/level-select/LevelSelectButtonDemo.tscn
-./project/src/demo/ui/SceneTransitionDemo.tscn
-./project/src/demo/ui/settings/keybind/KeybindManagerDemo.tscn
-./project/src/demo/ui/settings/SettingsMenuDemo.tscn
-./project/src/demo/ui/touch/EightWayDemo.tscn
-./project/src/demo/world/creature/CreaturePaletteDemo.tscn
-./project/src/demo/world/CutsceneDemo.tscn
-./project/src/demo/world/environment/restaurant/RestaurantPuzzleSceneDemo.tscn
-./project/src/demo/world/environment/restaurant/RestaurantViewDemo.tscn
-./project/src/demo/world/environment/restaurant/TurboFatRestaurantDemo.tscn
-./project/src/demo/world/environment/RippleWavesDemo.tscn
-./project/src/demo/world/environment/SmokeClusterDemo.tscn
-./project/src/demo/world/LetterShooterDemo.tscn



 -replace 'get_cellv' with get_cell_source_id
 -replace 'get_cell' with 'get_cell_source_id
replace tile_map.cell_size with tile_map.tile_set.tile_size
replace tile_map.clear with tile_map.clear_layer(0)
update tile_map.set_cell calls to include 'Vector2.ZERO'
  _tile_map.set_cell(0, pan_cell, tile, Vector2.ZERO)
replace 'tile_set.tile_get_texture(tile_id)' with tile_set.get_source(tile_id).texture
replace 'tile_set.tile_get_material(tile_id)' with tile_set.get_source(tile_id).get_tile_data(Vector2i.ZERO, 0).texture


what if all tilesets were temporarily just 16x16 pixels, or something?


* project/src/main/puzzle/OldPuzzleTileMap.tscn      |  6 ++--
* project/src/main/puzzle/old-puzzle-tile-set.tres   |  8 ++---
* .../src/main/puzzle/puzzle-tile-set-diagram.tres   |  8 ++---
* project/src/main/puzzle/puzzle-tile-set-onion.tres |  8 ++---
* .../src/main/puzzle/puzzle-tile-set-veggies.tres   |  8 ++---
* .../environment/lemon/lemon-ground-library.tres    |  8 ++---
* .../environment/lemon/lemon-obstacle-library.tres  | 14 ++++-----
* .../environment/lemon/lemon-terrain-library.tres   |  4 +--
* .../environment/marsh/marsh-ground-library.tres    |  8 ++---
* .../environment/marsh/marsh-obstacle-library.tres  | 12 ++++----
* .../environment/marsh/marsh-terrain-library.tres   |  2 +-
* .../environment/poki/poki-ground-library.tres      |  8 ++---
* .../environment/poki/poki-obstacle-library.tres    |  2 +-
* .../environment/poki/poki-terrain-library.tres     |  4 +--
* .../environment/restaurant/floor-library.tres      |  4 +--
* .../restaurant/turbo-fat-obstacle-library.tres     | 32 +++++++++----------
* .../restaurant/undecorated-floor-library.tres      |  6 ++--
* .../undecorated-turbo-fat-obstacle-library.tres    | 34 ++++++++++----------
* project/src/main/puzzle/night/NightPlayfield.tscn  |  4 +--
* .../src/main/puzzle/night/NightPuzzleTileMap.tscn  |  6 ++--
* .../src/main/world/environment/IndoorShadows.tscn  |  2 +-
* .../src/main/world/environment/OutdoorShadows.tscn |  2 +-
% .../world/environment/lemon/LemonRippleSprite.tscn | 36 +++++++++++-----------
% .../world/environment/marsh/MarshRippleSprite.tscn | 36 +++++++++++-----------
% .../world/environment/poki/PokiRippleSprite.tscn   | 36 +++++++++++-----------



fix tilemap alternatives
-apply EditorScript fix to OldPuzzleTileMap
-apply EditorScript fix to all similar files

update all tilemap regions project-wide using regex
 (^.*region \= Rect2\( 0\, 0\, )([0-9]*\, [0-9]*)( \))
 $116, 16$3
in each affected .tscn, .tres file...
run alternative-tile-remover.gd
update margins -> 2
update separation -> 4
update texture_region_size to match the old autotile/tile_size
create tiles in non-transparent texture regions
update the tileset's tile size to match the old cell_size

74,166
135,165
67,45
90,120
128,104 (indoor cell size)
210,108 (indoor floor size)

restore old-puzzle-tile-set
restore OldPuzzleCornerMap
restore OldPuzzleTileMap
